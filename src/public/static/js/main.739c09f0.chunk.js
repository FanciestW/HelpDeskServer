(this.webpackJsonphelpdesk=this.webpackJsonphelpdesk||[]).push([[0],{359:function(e,t,a){e.exports=a.p+"static/media/confused_travolta.4a06efb5.gif"},376:function(e,t,a){e.exports=a(423)},422:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),l=a(15),o=a.n(l),c=a(16),s=a(9),u=a(24),d=a(454),m=a(316),g=a(349),p=a(138),b=a(458),v=a(35),f=a(106),E=a(22),h=a(345),O=a(318),j=a(453),y=a(448),N=a(450),k=a(451),T=a(51),S=a(452),w=a(317),C=Object(m.a)((function(){return{card:{minWidth:275,minHeight:280},cardHeader:{textAlign:"center"},cardContent:{backgroundColor:"#00000012"},cardData:{paddingTop:30,fontSize:64,height:110,fontWeight:"bold",textAlign:"center"},cardActions:{minHeight:40}}})),D=function(e){var t=C();return i.a.createElement(y.a,{className:t.card},i.a.createElement(N.a,{className:t.cardHeader,title:e.title,titleTypographyProps:{color:"textSecondary"}}),i.a.createElement(k.a,{className:t.cardContent},i.a.createElement(T.a,{className:t.cardData,color:"textPrimary",gutterBottom:!0},e.data)),i.a.createElement(S.a,{className:t.cardActions},i.a.createElement(w.a,{size:"small",href:e.buttonDestination},e.buttonText)))};function I(e){return{type:n.CHANGE_AUTHED,isAuthed:e}}function x(){var e=Object(u.a)(["\n  query {\n    getCreatedTickets {\n      ticketId\n    }\n    getOpenTickets {\n      ticketId\n    }\n    getTechnicians {\n      uid\n    }\n  }\n"]);return x=function(){return e},e}function A(){var e=Object(u.a)(["\n    query {\n      getOpenTickets {\n        ticketId\n      }\n      getUpcomingTasks {\n        taskId\n      }\n      getClients {\n        uid\n      }\n    }\n  "]);return A=function(){return e},e}!function(e){e.CHANGE_AUTHED="CHANGE_AUTHED"}(n||(n={}));var q=Object(m.a)((function(){return{root:{flexGrow:1,display:"flex",flexWrap:"wrap",padding:10},paper:{height:280,width:240}}})),$=function(){var e=Object(c.b)(),t=q(),a=Object(r.useState)(["N/A","N/A","N/A"]),n=Object(s.a)(a,2),l=n[0],o=n[1],u=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user}))||{},d=u.uid,m=u.isTechnician,g=Object(E.a)(A()),p=Object(E.a)(x()),b=Object(O.a)(m?g:p,{onCompleted:function(e){var t,a,n,r,i,l,c,s,u,d,g,p;m?o([(null===e||void 0===e||null===(t=e.getOpenTickets)||void 0===t||null===(a=t.length)||void 0===a?void 0:a.toString())||"N/A",(null===e||void 0===e||null===(n=e.getUpcomingTasks)||void 0===n||null===(r=n.length)||void 0===r?void 0:r.toString())||"N/A",(null===e||void 0===e||null===(i=e.getClients)||void 0===i||null===(l=i.length)||void 0===l?void 0:l.toString())||"N/A"]):o([(null===e||void 0===e||null===(c=e.getCreatedTickets)||void 0===c||null===(s=c.length)||void 0===s?void 0:s.toString())||"N/A",(null===e||void 0===e||null===(u=e.getOpenTickets)||void 0===u||null===(d=u.length)||void 0===d?void 0:d.toString())||"N/A",(null===e||void 0===e||null===(g=e.getTechnicians)||void 0===g||null===(p=g.length)||void 0===p?void 0:p.toString())||"N/A"])},onError:function(t){var a;401===(null===(a=t.networkError)||void 0===a?void 0:a.statusCode)&&(localStorage.setItem("authed","false"),e(I(!1)))}}).refetch;Object(r.useEffect)((function(){b()}),[d]);var v=m?["Open Tickets","Upcoming Tasks","Clients"]:["My Tickets","Open Tickets","My Technicians"],f=m?["See Open Tickets","See Tasks","Clients List"]:["See My Tickets","See Open Tickets","Technicians List"],h=m?["/tickets","/tasks","/clients"]:["/tickets","/tickets","/technicians"];return i.a.createElement("div",{className:t.root},i.a.createElement(j.a,{container:!0,className:t.root,spacing:2},i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(j.a,{container:!0,justify:"center",spacing:2},v.map((function(e,t){return i.a.createElement(j.a,{key:t,item:!0},i.a.createElement(D,{title:e,data:l[t],buttonText:f[t],buttonDestination:h[t]}))}))))))},W=a(148),F=a.n(W),P=a(329),R=a(464),B=a(472);function L(){var e=Object(u.a)(["\n    query {\n      getTickets {\n        ticketId\n        title\n        description\n        createdBy {\n          uid\n          firstName\n          lastName\n          email\n        }\n        assignedTo {\n          uid\n          firstName\n          lastName\n          email\n        }\n        status\n        priority\n        dueDate\n      }\n    }\n  "]);return L=function(){return e},e}var U=Object(m.a)((function(e){return{addFab:{margin:e.spacing(1),top:"auto",right:20,bottom:20,left:"auto",position:"absolute"}}}));function H(){var e=Object(c.b)(),t=Object(f.g)(),a=U(),n=Object(r.useState)([]),l=Object(s.a)(n,2),o=l[0],u=l[1],d=(Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user}))||{}).uid,m=Object(E.a)(L()),g=Object(O.a)(m,{onCompleted:function(e){var t,a=null===e||void 0===e||null===(t=e.getTickets)||void 0===t?void 0:t.map((function(e){var t,a,n,r,i,l,o,c="No Date";try{c=Intl.DateTimeFormat("en-US").format(new Date(e.dueDate||"")).toString()}catch(s){c="No Date"}return[e.title?"".concat(null===(t=e.title)||void 0===t?void 0:t.substring(0,40)).concat(e.title.length>40?"...":""):"",e.description?"".concat(null===(a=e.description)||void 0===a?void 0:a.substring(0,80)).concat(e.description.length>80?"...":""):"",e.createdBy?"".concat(null===(n=e.createdBy)||void 0===n?void 0:n.firstName," ").concat(null===(r=e.createdBy)||void 0===r?void 0:r.lastName):"N/A",e.assignedTo?"".concat(null===(i=e.assignedTo)||void 0===i?void 0:i.firstName," ").concat(null===(l=e.assignedTo)||void 0===l?void 0:l.lastName):"Unassigned",e.status||"N/A",(null===(o=e.priority)||void 0===o?void 0:o.toString())||"N/A",c,e.ticketId||""]}));u(a)},onError:function(t){var a;401===(null===(a=t.networkError)||void 0===a?void 0:a.statusCode)&&(localStorage.setItem("authed","false"),e(I(!1)))}}).refetch;Object(r.useEffect)((function(){g()}),[d]);return i.a.createElement("div",null,i.a.createElement(F.a,{title:"All Tickets",data:o,columns:[{name:"title",label:"Title",options:{filter:!1,sort:!0}},{name:"description",label:"Description",options:{filter:!1,sort:!0}},{name:"createdBy",label:"Created By",options:{filter:!0,sort:!0}},{name:"assignedTo",label:"Assigned To",options:{filter:!0,sort:!0}},{name:"status",label:"Status",options:{filter:!0,sort:!0}},{name:"priority",label:"Priority",options:{filter:!0,sort:!0}},{name:"dueDate",label:"Due Date",options:{filter:!1,sort:!0}}],options:{filterType:"multiselect",print:!1,download:!1,rowsPerPageOptions:[5,10,20,50],onRowClick:function(e,a){t.push("/ticket/".concat(o[a.dataIndex][7]))}}}),i.a.createElement(P.a,{title:"New Ticket"},i.a.createElement(R.a,{className:a.addFab,"aria-label":"add",color:"primary",onClick:function(){return t.push("/ticket/new")}},i.a.createElement(B.a,null))))}var M=a(76),z=a(54),G=a(107),V=a(336),_=a(258),K=a(260),J=a(261),Y=a(331),Q=a(456),X=a(489),Z=a(43),ee=a(486),te=a(104),ae=a(353);function ne(){var e=Object(u.a)(["\n    mutation NewTicket(\n      $title: String!,\n      $description: String,\n      $assignedTo: String,\n      $status: String,\n      $priority: Int!,\n      $dueDate: String\n    ) {\n      newTicket(\n        title: $title,\n        description: $description,\n        assignedTo: $assignedTo,\n        status: $status,\n        priority: $priority,\n        dueDate: $dueDate\n      ) {\n        ticketId\n      }\n    }\n  "]);return ne=function(){return e},e}function re(){var e=Object(u.a)(["\n    query {\n      getTechnicians {\n        uid\n        firstName\n        lastName\n        email\n      }\n    }\n  "]);return re=function(){return e},e}var ie=Object(m.a)((function(e){return{layout:Object(z.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),title:{textAlign:"center"},paper:Object(z.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},progress:{color:"#FFFFFF"}}}));function le(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(""),o=Object(s.a)(l,2),u=o[0],d=o[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),p=g[0],b=g[1],v=Object(r.useState)(""),h=Object(s.a)(v,2),y=h[0],N=h[1],k=Object(r.useState)(""),S=Object(s.a)(k,2),C=S[0],D=S[1],x=Object(r.useState)(""),A=Object(s.a)(x,2),q=A[0],$=A[1],W=Object(r.useState)(void 0),F=Object(s.a)(W,2),P=F[0],R=F[1],B=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user})),L=ie(),U=Object(f.g)(),H=Object(c.b)(),z=Object(E.a)(re()),le=Object(O.a)(z,{onCompleted:function(e){var t=B.uid,a=B.firstName,r=B.lastName,i=B.email,l=[].concat(Object(M.a)(e.getTechnicians),[{uid:t,firstName:a,lastName:r,email:i}]);n(l)},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}).loading,oe=Object(E.a)(ne()),ce=Object(ae.a)(oe,{onCompleted:function(){U.goBack()},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}),se=Object(s.a)(ce,2),ue=se[0],de=se[1].loading,me=["New","Pending","Started","In Progress","Done","Deleted","Archived"];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.layout},i.a.createElement(G.a,{className:L.paper},i.a.createElement(T.a,{className:L.title,variant:"h4",gutterBottom:!0},"New Ticket Details"),i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{required:!0,variant:"outlined",id:"title",name:"title",label:"Title",value:u,onChange:function(e){return d(e.target.value)},fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{variant:"outlined",id:"description",name:"description",label:"Description",rows:6,value:p,onChange:function(e){return b(e.target.value)},multiline:!0,fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"status-label"},"Status"),i.a.createElement(J.a,{required:!0,id:"status",name:"status",labelId:"status-label",label:"Status",defaultValue:"new",value:C,onChange:function(e){return D(e.target.value)},fullWidth:!0},["new","pending","started","in progress","done","deleted","archived"].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},me[t])}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"priority-label"},"Priority"),i.a.createElement(J.a,{required:!0,id:"priority",name:"priority",labelId:"priority-label",label:"Priority",value:q,onChange:function(e){return $(e.target.value)},fullWidth:!0},[1,2,3,4,5].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},e)}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(X.a,{fullWidth:!0,autoSelect:!0,autoHighlight:!0,loading:le,id:"status-combo-box",onChange:function(e,t){return N(t.uid)},options:a,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)},renderInput:function(e){return i.a.createElement(V.a,Object.assign({},e,{variant:"outlined",id:"assignedTo",name:"assignedTo",label:"Assigned To",fullWidth:!0}))}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(Z.a,{utils:te.a},i.a.createElement(ee.a,{fullWidth:!0,disableToolbar:!0,minDate:new Date,minDateMessage:"Oh no! This ticket is overdue",emptyLabel:"No Due Date",variant:"inline",inputVariant:"outlined",format:"MM/dd/yyyy",margin:"none",id:"date-picker-inline",label:"Due Date",value:P,onChange:function(e){return R(e)},KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement("div",{className:L.buttons},i.a.createElement(w.a,{variant:"contained",color:"primary",className:L.button,onClick:function(){ue({variables:{title:u,description:p,assignedTo:y,status:C,priority:q,dueDate:null===P||void 0===P?void 0:P.toISOString()}})}},de?i.a.createElement(Q.a,{className:L.progress}):"Save")))))}function oe(){var e=Object(u.a)(["\n    mutation UpdateTicket(\n      $ticketId: ID!,\n      $title: String!,\n      $description: String,\n      $assignedTo: String,\n      $status: String,\n      $priority: Int!,\n      $dueDate: String\n    ) {\n      updateTicket(\n        ticketId: $ticketId,\n        title: $title,\n        description: $description,\n        assignedTo: $assignedTo,\n        status: $status,\n        priority: $priority,\n        dueDate: $dueDate\n      ) {\n        ticketId\n      }\n    }\n  "]);return oe=function(){return e},e}function ce(){var e=Object(u.a)(["\n    query {\n      getTechnicians {\n        uid\n        firstName\n        lastName\n        email\n      }\n    }\n  "]);return ce=function(){return e},e}function se(){var e=Object(u.a)(["\n    query GetATicket($ticketId: ID!) {\n      getATicket(ticketId: $ticketId) {\n        title\n        description\n        assignedTo {\n          uid\n          firstName\n          lastName\n          email\n        }\n        status\n        priority\n        dueDate\n      }\n    }\n  "]);return se=function(){return e},e}var ue=Object(m.a)((function(e){return{layout:Object(z.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),title:{textAlign:"center"},paper:Object(z.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},progress:{color:"#FFFFFF"}}}));function de(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(""),o=Object(s.a)(l,2),u=o[0],d=o[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),p=g[0],b=g[1],v=Object(r.useState)(""),h=Object(s.a)(v,2),y=h[0],N=h[1],k=Object(r.useState)(""),S=Object(s.a)(k,2),C=S[0],D=S[1],x=Object(r.useState)(""),A=Object(s.a)(x,2),q=A[0],$=A[1],W=Object(r.useState)(void 0),F=Object(s.a)(W,2),P=F[0],R=F[1],B=Object(f.h)().ticketId,L=ue(),U=Object(f.g)(),H=Object(c.b)(),z=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user})),ne=Object(E.a)(se()),re=Object(O.a)(ne,{variables:{ticketId:B},onCompleted:function(e){var t,a,n,r,i,l,o,c,s,u,m,g,p,v;d(null!==(t=null===(a=e.getATicket)||void 0===a?void 0:a.title)&&void 0!==t?t:""),b(null!==(n=null===(r=e.getATicket)||void 0===r?void 0:r.description)&&void 0!==n?n:""),N(null!==(i=null===(l=e.getATicket)||void 0===l||null===(o=l.assignedTo)||void 0===o?void 0:o.uid)&&void 0!==i?i:""),D(null!==(c=null===(s=e.getATicket)||void 0===s?void 0:s.status)&&void 0!==c?c:"new"),$(null!==(u=null===(m=e.getATicket)||void 0===m||null===(g=m.priority)||void 0===g?void 0:g.toString())&&void 0!==u?u:"5"),R(new Date(null!==(p=null===(v=e.getATicket)||void 0===v?void 0:v.dueDate)&&void 0!==p?p:""))},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}),ie=re.refetch,le=re.loading;Object(r.useEffect)((function(){ie()}),[B]);var de=Object(E.a)(ce()),me=Object(O.a)(de,{onCompleted:function(e){var t=z.uid,a=z.firstName,r=z.lastName,i=z.email,l=[].concat(Object(M.a)(e.getTechnicians),[{uid:t,firstName:a,lastName:r,email:i}]);n(l)},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}).loading,ge=Object(E.a)(oe()),pe=Object(ae.a)(ge,{onCompleted:function(){U.goBack()},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}),be=Object(s.a)(pe,2),ve=be[0],fe=be[1].loading,Ee=["New","Pending","Started","In Progress","Done","Deleted","Archived"];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.layout},i.a.createElement(G.a,{className:L.paper},i.a.createElement(T.a,{className:L.title,variant:"h4",gutterBottom:!0},"Ticket Details"),i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{required:!0,variant:"outlined",id:"title",name:"title",label:"Title",value:u,onChange:function(e){return d(e.target.value)},fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{variant:"outlined",id:"description",name:"description",label:"Description",rows:6,value:p,onChange:function(e){return b(e.target.value)},multiline:!0,fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"status-label"},"Status"),i.a.createElement(J.a,{required:!0,id:"status",name:"status",labelId:"status-label",label:"Status",defaultValue:"new",value:C,onChange:function(e){return D(e.target.value)},fullWidth:!0},["new","pending","started","in progress","done","deleted","archived"].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},Ee[t])}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"priority-label"},"Priority"),i.a.createElement(J.a,{required:!0,id:"priority",name:"priority",labelId:"priority-label",label:"Priority",value:q,onChange:function(e){return $(e.target.value)},fullWidth:!0},[1,2,3,4,5].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},e)}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(X.a,{fullWidth:!0,autoSelect:!0,autoHighlight:!0,loading:me,id:"status-combo-box",onChange:function(e,t){return N(t.uid)},options:a,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)},value:le||me?null:a.find((function(e){return e.uid===y})),renderInput:function(e){return i.a.createElement(V.a,Object.assign({},e,{variant:"outlined",id:"assignedTo",name:"assignedTo",label:"Assigned To",fullWidth:!0}))}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(Z.a,{utils:te.a},i.a.createElement(ee.a,{fullWidth:!0,disableToolbar:!0,minDate:new Date,minDateMessage:"Oh no! This ticket is overdue",emptyLabel:"No Due Date",invalidLabel:"Testing",variant:"inline",inputVariant:"outlined",format:"MM/dd/yyyy",margin:"none",id:"date-picker-inline",label:"Due Date",value:P,onChange:function(e){return R(e)},KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement("div",{className:L.buttons},i.a.createElement(w.a,{variant:"contained",color:"primary",className:L.button,onClick:function(){ve({variables:{ticketId:B,title:u,description:p,assignedTo:y,status:C,priority:q,dueDate:null===P||void 0===P?void 0:P.toISOString()}})}},fe?i.a.createElement(Q.a,{className:L.progress}):"Update")))))}function me(){var e=Object(u.a)(["\n    query {\n      getTasks {\n        taskId\n        title\n        description\n        createdBy {\n          uid\n          firstName\n          lastName\n        }\n        assignedTo {\n          uid\n          firstName\n          lastName\n        }\n        status\n        priority\n        dueDate\n      }\n    }\n  "]);return me=function(){return e},e}var ge=Object(m.a)((function(e){return{addFab:{margin:e.spacing(1),top:"auto",right:20,bottom:20,left:"auto",position:"absolute"}}}));function pe(){var e=ge(),t=Object(f.g)(),a=Object(c.b)(),n=Object(r.useState)([]),l=Object(s.a)(n,2),o=l[0],u=l[1],d=(Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user}))||{}).uid,m=Object(E.a)(me()),g=Object(O.a)(m,{onCompleted:function(e){var t,a=null===e||void 0===e||null===(t=e.getTasks)||void 0===t?void 0:t.map((function(e){var t,a,n,r,i,l,o,c,s,u="No Date";try{u=Intl.DateTimeFormat("en-US").format(new Date(e.dueDate||"")).toString()}catch(d){u="No Date"}return[e.title?"".concat(null===(t=e.title)||void 0===t?void 0:t.substring(0,40)).concat((null===(a=e.title)||void 0===a?void 0:a.length)>40?"...":""):"",e.description?"".concat(null===(n=e.description)||void 0===n?void 0:n.substring(0,80)).concat((null===(r=e.description)||void 0===r?void 0:r.length)>80?"...":""):"",e.createdBy?"".concat(null===(i=e.createdBy)||void 0===i?void 0:i.firstName," ").concat(null===(l=e.createdBy)||void 0===l?void 0:l.lastName):"",e.assignedTo?"".concat(null===(o=e.assignedTo)||void 0===o?void 0:o.firstName," ").concat(null===(c=e.assignedTo)||void 0===c?void 0:c.lastName):"",e.status||"N/A",(null===(s=e.priority)||void 0===s?void 0:s.toString())||"N/A",u,e.taskId||""]}));u(a)},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),a(I(!1)))}}).refetch;Object(r.useEffect)((function(){g()}),[d]);return i.a.createElement("div",null,i.a.createElement(F.a,{title:"All Tasks",data:o,columns:[{name:"title",label:"Title",options:{filter:!1,sort:!0}},{name:"description",label:"Description",options:{filter:!1,sort:!0}},{name:"createdBy",label:"Created By",options:{filter:!0,sort:!0}},{name:"assignedTo",label:"Assigned To",options:{filter:!0,sort:!0}},{name:"status",label:"Status",options:{filter:!0,sort:!0}},{name:"priority",label:"Priority",options:{filter:!0,sort:!0}},{name:"dueDate",label:"Due Date",options:{filter:!1,sort:!0}}],options:{filterType:"multiselect",print:!1,download:!1,rowsPerPageOptions:[5,10,20,50],onRowClick:function(e,a){t.push("/task/".concat(o[a.dataIndex][7]))}}}),i.a.createElement(P.a,{title:"New Task"},i.a.createElement(R.a,{className:e.addFab,"aria-label":"add",color:"primary",onClick:function(){return t.push("/task/new")}},i.a.createElement(B.a,null))))}function be(){var e=Object(u.a)(["\n    mutation NewTask(\n      $title: String!,\n      $description: String,\n      $assignedTo: String,\n      $status: String,\n      $priority: Int!,\n      $dueDate: String\n    ) {\n      newTask(\n        title: $title,\n        description: $description,\n        assignedTo: $assignedTo,\n        status: $status,\n        priority: $priority,\n        dueDate: $dueDate\n      ) {\n        taskId\n      }\n    }\n  "]);return be=function(){return e},e}function ve(){var e=Object(u.a)(["\n    query {\n      getTechnicians {\n        uid\n        firstName\n        lastName\n        email\n      }\n    }\n  "]);return ve=function(){return e},e}var fe=Object(m.a)((function(e){return{layout:Object(z.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),title:{textAlign:"center"},paper:Object(z.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},progress:{color:"#FFFFFF"}}}));function Ee(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(""),o=Object(s.a)(l,2),u=o[0],d=o[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),p=g[0],b=g[1],v=Object(r.useState)(""),h=Object(s.a)(v,2),y=h[0],N=h[1],k=Object(r.useState)(""),S=Object(s.a)(k,2),C=S[0],D=S[1],x=Object(r.useState)(""),A=Object(s.a)(x,2),q=A[0],$=A[1],W=Object(r.useState)(void 0),F=Object(s.a)(W,2),P=F[0],R=F[1],B=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user})),L=fe(),U=Object(f.g)(),H=Object(c.b)(),z=Object(E.a)(ve()),ne=Object(O.a)(z,{onCompleted:function(e){var t=B.uid,a=B.firstName,r=B.lastName,i=B.email,l=[].concat(Object(M.a)(e.getTechnicians),[{uid:t,firstName:a,lastName:r,email:i}]);n(l)},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}).loading,re=Object(E.a)(be()),ie=Object(ae.a)(re,{onCompleted:function(){U.goBack()},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}),le=Object(s.a)(ie,2),oe=le[0],ce=le[1].loading,se=["New","Pending","Started","In Progress","Done","Deleted","Archived"];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.layout},i.a.createElement(G.a,{className:L.paper},i.a.createElement(T.a,{className:L.title,variant:"h4",gutterBottom:!0},"New Task"),i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{required:!0,variant:"outlined",id:"title",name:"title",label:"Title",value:u,onChange:function(e){return d(e.target.value)},fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{variant:"outlined",id:"description",name:"description",label:"Description",rows:6,value:p,onChange:function(e){return b(e.target.value)},multiline:!0,fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"status-label"},"Status"),i.a.createElement(J.a,{required:!0,id:"status",name:"status",labelId:"status-label",label:"Status",defaultValue:"new",value:C,onChange:function(e){return D(e.target.value)},fullWidth:!0},["new","pending","started","in progress","done","deleted","archived"].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},se[t])}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"priority-label"},"Priority"),i.a.createElement(J.a,{required:!0,id:"priority",name:"priority",labelId:"priority-label",label:"Priority",value:q,onChange:function(e){return $(e.target.value)},fullWidth:!0},[1,2,3,4,5].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},e)}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(X.a,{fullWidth:!0,autoSelect:!0,autoHighlight:!0,loading:ne,id:"status-combo-box",onChange:function(e,t){return N(t.uid)},options:a,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)},renderInput:function(e){return i.a.createElement(V.a,Object.assign({},e,{variant:"outlined",id:"assignedTo",name:"assignedTo",label:"Assigned To",fullWidth:!0}))}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(Z.a,{utils:te.a},i.a.createElement(ee.a,{fullWidth:!0,disableToolbar:!0,minDate:new Date,minDateMessage:"Oh no! This task is overdue",emptyLabel:"No Due Date",variant:"inline",inputVariant:"outlined",format:"MM/dd/yyyy",margin:"none",id:"date-picker-inline",label:"Due Date",value:P,onChange:function(e){return R(e)},KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement("div",{className:L.buttons},i.a.createElement(w.a,{variant:"contained",color:"primary",className:L.button,onClick:function(){oe({variables:{title:u,description:p,assignedTo:y,status:C,priority:q,dueDate:null===P||void 0===P?void 0:P.toISOString()}})}},ce?i.a.createElement(Q.a,{className:L.progress}):"Save")))))}function he(){var e=Object(u.a)(["\n    mutation UpdateTask(\n      $taskId: ID!,\n      $title: String!,\n      $description: String,\n      $assignedTo: String,\n      $status: String,\n      $priority: Int!,\n      $dueDate: String\n    ) {\n      updateTask(\n        taskId: $taskId,\n        title: $title,\n        description: $description,\n        assignedTo: $assignedTo,\n        status: $status,\n        priority: $priority,\n        dueDate: $dueDate\n      ) {\n        taskId\n      }\n    }\n  "]);return he=function(){return e},e}function Oe(){var e=Object(u.a)(["\n    query {\n      getTechnicians {\n        uid\n        firstName\n        lastName\n        email\n      }\n    }\n  "]);return Oe=function(){return e},e}function je(){var e=Object(u.a)(["\n    query GetATask($taskId: ID!) {\n      getATask(taskId: $taskId) {\n        title\n        description\n        assignedTo {\n          uid\n          firstName\n          lastName\n          email\n        }\n        status\n        priority\n        dueDate\n      }\n    }\n  "]);return je=function(){return e},e}var ye=Object(m.a)((function(e){return{layout:Object(z.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),title:{textAlign:"center"},paper:Object(z.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},progress:{color:"#FFFFFF"}}}));function Ne(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(""),o=Object(s.a)(l,2),u=o[0],d=o[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),p=g[0],b=g[1],v=Object(r.useState)(""),h=Object(s.a)(v,2),y=h[0],N=h[1],k=Object(r.useState)(""),S=Object(s.a)(k,2),C=S[0],D=S[1],x=Object(r.useState)(""),A=Object(s.a)(x,2),q=A[0],$=A[1],W=Object(r.useState)(void 0),F=Object(s.a)(W,2),P=F[0],R=F[1],B=Object(f.h)().taskId,L=ye(),U=Object(f.g)(),H=Object(c.b)(),z=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user})),ne=Object(E.a)(je()),re=Object(O.a)(ne,{variables:{taskId:B},onCompleted:function(e){var t,a,n,r,i,l,o,c,s,u,m,g,p,v;d(null!==(t=null===(a=e.getATask)||void 0===a?void 0:a.title)&&void 0!==t?t:""),b(null!==(n=null===(r=e.getATask)||void 0===r?void 0:r.description)&&void 0!==n?n:""),N(null!==(i=null===(l=e.getATask)||void 0===l||null===(o=l.assignedTo)||void 0===o?void 0:o.uid)&&void 0!==i?i:""),D(null!==(c=null===(s=e.getATask)||void 0===s?void 0:s.status)&&void 0!==c?c:"new"),$(null!==(u=null===(m=e.getATask)||void 0===m||null===(g=m.priority)||void 0===g?void 0:g.toString())&&void 0!==u?u:"5"),R(new Date(null!==(p=null===(v=e.getATask)||void 0===v?void 0:v.dueDate)&&void 0!==p?p:""))},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}),ie=re.refetch,le=re.loading;Object(r.useEffect)((function(){ie()}),[B]);var oe=Object(E.a)(Oe()),ce=Object(O.a)(oe,{onCompleted:function(e){var t=z.uid,a=z.firstName,r=z.lastName,i=z.email,l=[].concat(Object(M.a)(e.getTechnicians),[{uid:t,firstName:a,lastName:r,email:i}]);n(l)},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}).loading,se=Object(E.a)(he()),ue=Object(ae.a)(se,{onCompleted:function(){U.goBack()},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),H(I(!1)))}}),de=Object(s.a)(ue,2),me=de[0],ge=de[1].loading,pe=["New","Pending","Started","In Progress","Done","Deleted","Archived"];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.layout},i.a.createElement(G.a,{className:L.paper},i.a.createElement(T.a,{className:L.title,variant:"h4",gutterBottom:!0},"Task Details"),i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{required:!0,variant:"outlined",id:"title",name:"title",label:"Title",value:u,onChange:function(e){return d(e.target.value)},fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{variant:"outlined",id:"description",name:"description",label:"Description",rows:6,value:p,onChange:function(e){return b(e.target.value)},multiline:!0,fullWidth:!0})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"status-label"},"Status"),i.a.createElement(J.a,{required:!0,id:"status",name:"status",labelId:"status-label",label:"Status",defaultValue:"new",value:C,onChange:function(e){return D(e.target.value)},fullWidth:!0},["new","pending","started","in progress","done","deleted","archived"].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},pe[t])}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(_.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(K.a,{id:"priority-label"},"Priority"),i.a.createElement(J.a,{required:!0,id:"priority",name:"priority",labelId:"priority-label",label:"Priority",value:q,onChange:function(e){return $(e.target.value)},fullWidth:!0},[1,2,3,4,5].map((function(e,t){return i.a.createElement(Y.a,{key:t,value:e},e)}))))),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(X.a,{fullWidth:!0,autoSelect:!0,autoHighlight:!0,loading:ce,id:"status-combo-box",onChange:function(e,t){return N(t.uid)},options:a,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)},value:le||ce?null:a.find((function(e){return e.uid===y})),renderInput:function(e){return i.a.createElement(V.a,Object.assign({},e,{variant:"outlined",id:"assignedTo",name:"assignedTo",label:"Assigned To",fullWidth:!0}))}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(Z.a,{utils:te.a},i.a.createElement(ee.a,{fullWidth:!0,disableToolbar:!0,minDate:new Date,minDateMessage:"Oh no! This task is overdue",emptyLabel:"No Due Date",invalidLabel:"Testing",variant:"inline",inputVariant:"outlined",format:"MM/dd/yyyy",margin:"none",id:"date-picker-inline",label:"Due Date",value:P,onChange:function(e){return R(e)},KeyboardButtonProps:{"aria-label":"change date"}})))),i.a.createElement("div",{className:L.buttons},i.a.createElement(w.a,{variant:"contained",color:"primary",className:L.button,onClick:function(){me({variables:{taskId:B,title:u,description:p,assignedTo:y,status:C,priority:q,dueDate:null===P||void 0===P?void 0:P.toISOString()}})}},ge?i.a.createElement(Q.a,{className:L.progress}):"Update")))))}var ke=a(99),Te=a.n(ke),Se=a(151),we=a(152),Ce=a.n(we),De=a(432),Ie=a(428),xe=a(467),Ae=a(334),qe=a(455),$e=a(332),We=a(256),Fe=a(491),Pe=a(473),Re=a(474),Be=a(475),Le=a(476),Ue=a(477),He=a(478),Me=a(479),ze=a(480),Ge=a(481),Ve=a(482),_e=a(483),Ke=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,"&:hover":{cursor:"pointer"}},iconButton:{color:"#FFFFFF",margin:e.spacing(.5)},sideNav:{width:"320px"},routerLink:{color:"inherit",textDecoration:"none"}}}));function Je(){var e=Ke(),t=Object(c.b)(),a=(Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user}))||{}).isTechnician,n=Object(r.useState)(!1),l=Object(s.a)(n,2),o=l[0],u=l[1],d=Object(r.useState)(localStorage.getItem("theme")||"light"),m=Object(s.a)(d,1)[0];function g(){return(g=Object(Se.a)(Te.a.mark((function e(){return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.a.post("/api/user/logout");case 2:localStorage.setItem("authed","false"),t(I(!1)),window.location.reload();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){u(!o)},b=i.a.createElement("div",{className:e.sideNav,role:"presentation",onClick:p,onKeyDown:p},i.a.createElement(De.a,null,i.a.createElement(v.b,{to:"/dashboard",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(Pe.a,null)),i.a.createElement(Ae.a,{primary:"Dashboard"}))),i.a.createElement(v.b,{to:"/tickets",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(Re.a,null)),i.a.createElement(Ae.a,{primary:"Tickets"}))),i.a.createElement(v.b,{to:"/tasks",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(Be.a,null)),i.a.createElement(Ae.a,{primary:"Tasks List"}))),a?i.a.createElement(v.b,{to:"/clients",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(Le.a,null)),i.a.createElement(Ae.a,{primary:"Clients"}))):null,i.a.createElement(v.b,{to:"/technicians",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(Ue.a,null)),i.a.createElement(Ae.a,{primary:"Technicians"}))),i.a.createElement(v.b,{to:"/requests",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(He.a,null)),i.a.createElement(Ae.a,{primary:"Requests"}))),i.a.createElement(v.b,{to:"/profile",className:e.routerLink},i.a.createElement(Ie.a,{button:!0},i.a.createElement(xe.a,{className:"drawer-icon"},i.a.createElement(Me.a,null)),i.a.createElement(Ae.a,{primary:"My Profile"})))));return i.a.createElement(qe.a,{position:"static"},i.a.createElement($e.a,null,i.a.createElement(P.a,{title:"Menu"},i.a.createElement(We.a,{edge:"start",className:e.menuButton,onClick:p,color:"inherit","aria-label":"menu"},i.a.createElement(ze.a,null))),i.a.createElement(Fe.a,{open:o,onOpen:p,onClose:p,className:"side-drawer"},b),i.a.createElement(T.a,{variant:"h6",className:e.title},i.a.createElement(P.a,{title:"Go to Dashboard",placement:"bottom-start"},i.a.createElement(v.b,{to:"/dashboard",className:e.routerLink},"HelpDesk"))),i.a.createElement(P.a,{title:"dark"===m?"Light Mode":"Dark Mode"},i.a.createElement(We.a,{edge:"start",className:e.iconButton,onClick:function(){"dark"===localStorage.getItem("theme")?localStorage.setItem("theme","light"):localStorage.setItem("theme","dark"),window.location.reload()}},"dark"===m?i.a.createElement(Ge.a,null):i.a.createElement(Ve.a,null))),i.a.createElement(P.a,{title:"Log Out"},i.a.createElement(We.a,{edge:"start",className:e.iconButton,onClick:function(){return g.apply(this,arguments)}},i.a.createElement(_e.a,null)))))}var Ye=a(359),Qe=a.n(Ye),Xe=Object(m.a)((function(e){return{goHomeButton:{margin:e.spacing(2)}}}));function Ze(){var e=Xe();return i.a.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.a.createElement(T.a,{variant:"h3",component:"h3",color:"textPrimary",style:{zIndex:0}},"404"),i.a.createElement(T.a,{variant:"h4",component:"h4",color:"textPrimary",style:{zIndex:0}},"Page Not Found"),i.a.createElement(w.a,{variant:"contained",color:"primary",className:e.goHomeButton,href:"/"},"Go Home"),i.a.createElement("img",{style:{position:"fixed",left:"calc(50% - 238px)",bottom:"0px",zIndex:1},src:Qe.a,alt:"Sorry..."}))}var et=a(457),tt=a(435),at=a(335),nt=a(333),rt=a(488),it=a(466),lt=a(471),ot=a(222),ct=a.n(ot),st=a(223),ut=a.n(st),dt=a(490),mt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2),float:"right"}}}));function gt(){var e=Object(c.b)(),t=Object(f.g)(),a=mt(),n=Object(r.useState)(""),l=Object(s.a)(n,2),o=l[0],u=l[1],d=Object(r.useState)(""),m=Object(s.a)(d,2),g=m[0],p=m[1],b=Object(r.useState)(""),v=Object(s.a)(b,2),E=v[0],h=v[1],O=Object(r.useState)(""),y=Object(s.a)(O,2),N=y[0],k=y[1],S=Object(r.useState)(""),C=Object(s.a)(S,2),D=C[0],x=C[1],A=Object(r.useState)(""),q=Object(s.a)(A,2),$=q[0],W=q[1],F=Object(r.useState)(""),P=Object(s.a)(F,2),R=P[0],B=P[1],L=Object(r.useState)(""),U=Object(s.a)(L,2),H=U[0],M=U[1],z=Object(r.useState)(!1),G=Object(s.a)(z,2),K=G[0],J=G[1],Y=Object(r.useState)(!1),Q=Object(s.a)(Y,2),X=Q[0],Z=Q[1],ee=function(){var a=Object(Se.a)(Te.a.mark((function a(n){var r,i;return Te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,r={firstName:o,middleName:g,lastName:E,email:N,password:D,phone:R,company:H,isTechnician:K},a.next=5,Ce.a.post("/api/user/signup",r);case 5:i=a.sent,localStorage.setItem("authed",(200===i.status).toString()),e(I(200===i.status)),200===i.status&&t.push("/dashboard"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0),Z(!0);case 15:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}();return i.a.createElement(et.a,{component:"main",maxWidth:"md"},i.a.createElement("div",{className:a.paper},i.a.createElement(dt.a,{className:a.avatar},i.a.createElement(ct.a,null)),i.a.createElement(T.a,{component:"h1",variant:"h5"},"Sign up"),i.a.createElement("form",{className:a.form,onSubmit:ee,noValidate:!0},i.a.createElement(j.a,{container:!0,spacing:2},i.a.createElement(j.a,{item:!0,xs:12,sm:4},i.a.createElement(V.a,{autoFocus:!0,name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",type:"name",autoComplete:"given-name",value:o,onChange:function(e){return u(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12,sm:4},i.a.createElement(V.a,{variant:"outlined",name:"middleName",fullWidth:!0,id:"middleName",label:"Middle Name (Optional)",type:"name",autoComplete:"additional-name",value:g,onChange:function(e){return p(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12,sm:4},i.a.createElement(V.a,{variant:"outlined",name:"lastName",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",type:"name",autoComplete:"family-name",value:E,onChange:function(e){return h(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(V.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",type:"email",value:N,onChange:function(e){return k(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(V.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:D,onChange:function(e){return x(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(V.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirm-password",label:"Confirm Password",type:"password",id:"password-repeat",autoComplete:"current-password",value:$,onChange:function(e){return W(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(V.a,{variant:"outlined",fullWidth:!0,name:"phone",label:"Phone Number (Optional)",type:"tel",id:"phone",autoComplete:"tel",value:R,onChange:function(e){return B(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12,sm:6},i.a.createElement(V.a,{variant:"outlined",fullWidth:!0,name:"company",label:"Company (Optional)",type:"name",id:"company",autoComplete:"organization",value:H,onChange:function(e){return M(e.target.value)}})),i.a.createElement(j.a,{item:!0,xs:12},i.a.createElement(_.a,{component:"fieldset"},i.a.createElement(tt.a,{component:"legend"},"Are You a Technician?"),i.a.createElement(at.a,{"aria-label":"isTechnician",name:"isTechnician",value:K,onChange:function(e){J("true"===e.target.value)}},i.a.createElement(nt.a,{value:!0,control:i.a.createElement(rt.a,{color:"primary"}),label:"Yes"}),i.a.createElement(nt.a,{value:!1,control:i.a.createElement(rt.a,{color:"primary"}),label:"No"}))))),i.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",className:a.submit},"Sign Up"),i.a.createElement(j.a,{container:!0,justify:"flex-end"},i.a.createElement(j.a,{item:!0},i.a.createElement(it.a,{href:"/login",variant:"body2"},"Already have an account? Log in")))),i.a.createElement(lt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:X,autoHideDuration:3e3,onClose:function(){return Z(!1)},message:"Error",action:i.a.createElement(i.a.Fragment,null,"Unable to login, please try again.",i.a.createElement(We.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return Z(!1)}},i.a.createElement(ut.a,{fontSize:"small"})))})))}var pt=a(347),bt=Object(m.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function vt(){var e=Object(c.b)(),t=Object(f.g)(),a=bt(),n=Object(r.useState)(""),l=Object(s.a)(n,2),o=l[0],u=l[1],d=Object(r.useState)(""),m=Object(s.a)(d,2),g=m[0],p=m[1],b=Object(r.useState)(!1),v=Object(s.a)(b,2),E=v[0],h=v[1],O=function(){var a=Object(Se.a)(Te.a.mark((function a(n){var r,i;return Te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,r={email:o,password:g},a.next=5,Ce.a.post("/api/user/login",r);case 5:i=a.sent,localStorage.setItem("authed",(200===i.status).toString()),e(I(200===i.status)),200===i.status&&t.push("/dashboard"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0),h(!0);case 15:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}();return i.a.createElement(et.a,{component:"main",maxWidth:"xs"},i.a.createElement("div",{className:a.paper},i.a.createElement(dt.a,{className:a.avatar},i.a.createElement(ct.a,null)),i.a.createElement(T.a,{component:"h1",variant:"h5"},"Sign in"),i.a.createElement("form",{className:a.form,onSubmit:O,noValidate:!0},i.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:o,onChange:function(e){return u(e.target.value)},autoFocus:!0}),i.a.createElement(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:g,onChange:function(e){return p(e.target.value)},autoComplete:"current-password"}),i.a.createElement(nt.a,{control:i.a.createElement(pt.a,{value:"remember",color:"primary"}),label:"Remember me"}),i.a.createElement(w.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary",className:a.submit},"Sign In"),i.a.createElement(j.a,{container:!0},i.a.createElement(j.a,{item:!0,xs:!0},i.a.createElement(it.a,{href:"#",variant:"body2"},"Forgot password?")),i.a.createElement(j.a,{item:!0},i.a.createElement(it.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up")))),i.a.createElement(lt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:E,autoHideDuration:3e3,onClose:function(){return h(!1)},message:"Error",action:i.a.createElement(i.a.Fragment,null,"Unable to login, please try again.",i.a.createElement(We.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return h(!1)}},i.a.createElement(ut.a,{fontSize:"small"})))})))}var ft=a(459),Et=a(463),ht=a(461),Ot=a(462),jt=a(460),yt=a(360),Nt=a.n(yt),kt=a(487);function Tt(e){return i.a.createElement(kt.a,Object.assign({elevation:6,variant:"filled"},e))}function St(e){var t=Object(r.useState)(e.open),a=Object(s.a)(t,2),n=a[0],l=a[1];Object(r.useEffect)((function(){l(e.open)}),[e]);var o=function(e,t){"clickaway"!==t&&l(!1)};return i.a.createElement(lt.a,{open:n,autoHideDuration:e.duration||3e3,onClose:o},i.a.createElement(Tt,{onClose:o,severity:e.severity},e.message))}function wt(){var e=Object(u.a)(["\n    query {\n      getTechnicians {\n        uid\n        firstName\n        middleName\n        lastName\n        email\n        phone\n        company\n      }\n    }\n  "]);return wt=function(){return e},e}function Ct(){var e=Object(u.a)(["\n    query {\n      getClients {\n        uid\n        firstName\n        middleName\n        lastName\n        email\n        phone\n        company\n      }\n    }\n  "]);return Ct=function(){return e},e}function Dt(){var e=Object(u.a)(["\n    mutation NewRequest($recipientEmail: String!) {\n      newEmailRequest(recipientEmail: $recipientEmail) {\n        recipient {\n          uid\n          firstName\n          lastName\n          email\n        }\n      }\n    }\n  "]);return Dt=function(){return e},e}var It=Object(m.a)((function(e){return{addFab:{margin:e.spacing(1),top:"auto",right:20,bottom:20,left:"auto",position:"absolute"}}}));function xt(e){var t=Object(c.b)(),a=It(),n=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user}))||{},l=n.uid,o=n.isTechnician,u=Object(r.useState)([]),d=Object(s.a)(u,2),m=d[0],g=d[1],p=Object(r.useState)(!1),b=Object(s.a)(p,2),v=b[0],h=b[1],j=Object(r.useState)(""),y=Object(s.a)(j,2),N=y[0],k=y[1],T=Object(r.useState)(""),S=Object(s.a)(T,2),C=S[0],D=S[1],x=Object(r.useState)("info"),A=Object(s.a)(x,2),q=A[0],$=A[1],W=Object(r.useState)(!1),B=Object(s.a)(W,2),L=B[0],U=B[1],H=Object(E.a)(Dt()),M=Object(ae.a)(H,{onCompleted:function(){D("Request Sent"),$("success"),U(!0),h(!1)},onError:function(e){var a;401===(null===(a=e.networkError)||void 0===a?void 0:a.statusCode)?(localStorage.setItem("authed","false"),t(I(!1))):(D("Error: Bad Request"),$("error"),U(!0))}}),z=Object(s.a)(M,2),G=z[0],_=z[1],K=(_.loading,_.error,Object(E.a)(Ct())),J=Object(E.a)(wt()),Y=Object(O.a)("clients"===e.show?K:J,{onCompleted:function(t){var a="clients"===e.show?null===t||void 0===t?void 0:t.getClients:null===t||void 0===t?void 0:t.getTechnicians,n=null===a||void 0===a?void 0:a.map((function(e){return[e.firstName||"",e.middleName||"",e.lastName||"",e.email||"No Email",e.phone||"No Phone Number",e.company||"",e.isTechnician?"Yes":"No"]}));g(n||[])},onError:function(e){var a;401===(null===(a=e.networkError)||void 0===a?void 0:a.statusCode)&&(localStorage.setItem("authed","false"),t(I(!1)))}}).refetch;Object(r.useEffect)((function(){Y()}),[l]);return o||"clients"!==e.show?i.a.createElement("div",null,i.a.createElement(F.a,{data:m,columns:[{name:"firstName",label:"First Name",options:{filter:!1,sort:!0}},{name:"middleName",label:"Middle Name",options:{filter:!1,sort:!0}},{name:"lastName",label:"Last Name",options:{filter:!1,sort:!0}},{name:"email",label:"Email",options:{filter:!1,sort:!0}},{name:"phone",label:"Phone Number",options:{filter:!1,sort:!1}},{name:"company",label:"Company",options:{filter:!0,sort:!0}}],title:"clients"===e.show?"Clients List":"Technicians List",options:{filterType:"multiselect",print:!1,download:!1,rowsPerPageOptions:[5,10,20,50]}}),i.a.createElement(St,{severity:q,message:C,open:L}),i.a.createElement(ft.a,{open:v,onClose:function(){return h(!1)},"aria-labelledby":"form-dialog-title"},i.a.createElement(Et.a,{id:"form-dialog-title"},"Send ","clients"===e.show?"Client":"Technician"," Request"),i.a.createElement(ht.a,null,i.a.createElement(Ot.a,null,"To send a connection request, please enter your email address here. We will send your request."),i.a.createElement(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",value:N,onChange:function(e){return k(e.target.value)},fullWidth:!0})),i.a.createElement(jt.a,null,i.a.createElement(w.a,{onClick:function(){return h(!1)},color:"primary"},"Cancel"),i.a.createElement(w.a,{onClick:function(){return G({variables:{recipientEmail:N}})},color:"primary"},"Send Request"))),i.a.createElement(P.a,{title:"clients"===e.show?"Add Client":"Add Technician"},i.a.createElement(R.a,{className:a.addFab,"aria-label":"add",color:"primary",onClick:function(){return h(!0)}},i.a.createElement(Nt.a,null)))):i.a.createElement(f.a,{to:"/technicians"})}var At=a(468),qt=a(484),$t=a(485);function Wt(){var e=Object(u.a)(["\n    mutation AcceptRequest($requesterUid: String!) {\n      acceptRequest(requesterUid: $requesterUid) {\n        requestId\n        status\n      }\n    }\n  "]);return Wt=function(){return e},e}function Ft(){var e=Object(u.a)(["\n    query {\n      getReceivedRequests {\n        requestId\n        requesterUid\n        requester {\n          uid\n          firstName\n          lastName\n          email\n          isTechnician\n        }\n      }\n    }\n  "]);return Ft=function(){return e},e}var Pt,Rt=Object(m.a)((function(e){return{root:{width:"100%"},gridItem:{width:"80vw",maxWidth:800,padding:e.spacing(1)},list:{backgroundColor:e.palette.background.paper},listItemButton:{padding:e.spacing(2)}}}));function Bt(){var e=Rt(),t=Object(c.b)(),a=Object(r.useState)([]),n=Object(s.a)(a,2),l=n[0],o=n[1],u=Object(r.useState)([]),d=Object(s.a)(u,2),m=d[0],g=d[1],p=(Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user}))||{}).uid,b=Object(E.a)(Ft()),v=Object(O.a)(b,{onCompleted:function(e){g(e.getReceivedRequests)},onError:function(e){var a;401===(null===(a=e.networkError)||void 0===a?void 0:a.statusCode)&&(localStorage.setItem("authed","false"),t(I(!1)))}}).refetch,f=Object(E.a)(Wt()),h=Object(ae.a)(f,{onCompleted:function(e){var t=m.findIndex((function(t){return t.requestId===e.acceptRequest.requestId}));if(t>=0){var a=Object(M.a)(m);a.splice(t,1),g(a)}},onError:function(e){var a;401===(null===(a=e.networkError)||void 0===a?void 0:a.statusCode)&&(localStorage.setItem("authed","false"),t(I(!1)))}}),y=Object(s.a)(h,2),N=y[0];y[1].loading;Object(r.useEffect)((function(){v()}),[p]);var k=function(e){return function(){var t=l.indexOf(e),a=Object(M.a)(l);-1===t?a.push(e):a.splice(t,1),o(a)}};return i.a.createElement(j.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",className:e.root},i.a.createElement(j.a,{item:!0,className:e.gridItem},m.length<=0?i.a.createElement(T.a,{variant:"h4",style:{textAlign:"center"}},"No Requests"):i.a.createElement(De.a,{className:e.list},m.map((function(t,a){var n,r,o,c,s="checkbox-list-label-".concat(t);return i.a.createElement(Ie.a,{key:a,role:void 0,dense:!0,button:!0,onClick:k(t)},i.a.createElement(xe.a,null,i.a.createElement(pt.a,{edge:"start",checked:-1!==l.indexOf(t),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":s}})),i.a.createElement(Ae.a,{id:s,primary:"".concat(null===(n=t.requester)||void 0===n?void 0:n.firstName," ").concat(null===(r=t.requester)||void 0===r?void 0:r.lastName),secondary:"".concat((null===(o=t.requester)||void 0===o?void 0:o.isTechnician)?"Technician":"Client"," - ").concat(null===(c=t.requester)||void 0===c?void 0:c.email)}),i.a.createElement(At.a,null,i.a.createElement(P.a,{title:"Reject"},i.a.createElement(We.a,{className:e.listItemButton,edge:"end","aria-label":"comments"},i.a.createElement(qt.a,null))),i.a.createElement(P.a,{title:"Accept"},i.a.createElement(We.a,{className:e.listItemButton,onClick:function(){var e,t;(t=null===(e=m[a])||void 0===e?void 0:e.requesterUid)&&N({variables:{requesterUid:t}})},edge:"end","aria-label":"comments"},i.a.createElement($t.a,null)))))})))))}function Lt(){var e=Object(u.a)(["\n    query {\n      getUserInfo {\n        uid\n        firstName\n        middleName\n        lastName\n        email\n        phone\n        company\n        isTechnician\n      }\n    }\n  "]);return Lt=function(){return e},e}!function(e){e.UPDATE_USER="UPDATE_USER"}(Pt||(Pt={}));var Ut=Object(m.a)((function(){return{root:{height:"100vh"}}})),Ht=function(){var e=Object(c.c)((function(e){return e.authedReducer.isAuthed})),t=Object(c.c)((function(e){var t;return null===(t=e.userReducer)||void 0===t?void 0:t.user})),a=Object(c.b)(),n=Object(E.a)(Lt()),l=Object(h.a)(n,{onCompleted:function(e){var t=e.getUserInfo,n={uid:t.uid,firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,email:t.email,phone:t.phone,company:t.company,isTechnician:t.isTechnician};localStorage.setItem("user",JSON.stringify(n)),a(function(e){return{type:Pt.UPDATE_USER,user:e}}(n))},onError:function(e){var t;401===(null===(t=e.networkError)||void 0===t?void 0:t.statusCode)&&(localStorage.setItem("authed","false"),a(I(!1)))}}),o=Object(s.a)(l,1)[0];Object(r.useEffect)((function(){o()}),[e]);var u=Object(g.a)(Object(p.a)({palette:{type:"dark"===localStorage.getItem("theme")?"dark":"light"}})),m=Ut(u);return i.a.createElement(d.a,{theme:u},i.a.createElement(b.a,null),i.a.createElement("div",{className:m.root,style:{backgroundColor:u.palette.background.default}},i.a.createElement(v.a,null,e?i.a.createElement(Je,null):null,i.a.createElement(f.d,null,i.a.createElement(f.b,{path:"/dashboard"},e?i.a.createElement($,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/tickets"},e?i.a.createElement(H,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/ticket/new"},e?i.a.createElement(le,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/ticket/:ticketId"},e?i.a.createElement(de,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/tasks"},e?i.a.createElement(pe,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/task/new"},e?i.a.createElement(Ee,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/task/:taskId"},e?i.a.createElement(Ne,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/clients"},e?(null===t||void 0===t?void 0:t.isTechnician)?i.a.createElement(xt,{show:"clients"}):i.a.createElement(f.a,{to:"/technicians"}):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/technicians"},e?i.a.createElement(xt,{show:"technicians"}):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/requests"},e?i.a.createElement(Bt,null):i.a.createElement(f.a,{to:"/login"})),i.a.createElement(f.b,{path:"/login"},e?i.a.createElement(f.a,{to:"/dashboard"}):i.a.createElement(vt,null)),i.a.createElement(f.b,{path:"/signup"},e?i.a.createElement(f.a,{to:"/dashboard"}):i.a.createElement(gt,null)),i.a.createElement(f.b,{exact:!0,path:"/"},i.a.createElement(f.a,{to:"/dashboard"})),i.a.createElement(f.b,{path:"/*",component:Ze})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(422);var Mt,zt=a(163),Gt=a(196),Vt=a(197),_t=a(131),Kt=a(346),Jt=a(361),Yt=a(224),Qt={isAuthed:"true"===localStorage.getItem("authed")};var Xt={user:localStorage.getItem("user")?JSON.parse(null!==(Mt=localStorage.getItem("user"))&&void 0!==Mt?Mt:"{}"):null};var Zt=Object(zt.b)({authedReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.CHANGE_AUTHED:return Object(Yt.a)({},e,{isAuthed:t.isAuthed});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pt.UPDATE_USER:return Object(Yt.a)({},e,{user:t.user});default:return e}}}),ea=Object(zt.c)(Zt),ta=new Gt.a({cache:new Vt.a,link:new _t.a({uri:"/api/graphql"}),defaultOptions:{query:{fetchPolicy:"cache-first",errorPolicy:"none"},mutate:{fetchPolicy:"network-only",errorPolicy:"none"}}});Object(Jt.a)((function(e){var t=e.graphQLErrors,a=e.networkError;t&&t.forEach((function(e){var t=e.message,a=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(a,", Path: ").concat(n))})),a&&console.log("[Network error]: ".concat(a))})),o.a.render(i.a.createElement(c.a,{store:ea},i.a.createElement(i.a.StrictMode,null,i.a.createElement(Kt.a,{client:ta},i.a.createElement(Ht,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[376,1,2]]]);
//# sourceMappingURL=main.739c09f0.chunk.js.map